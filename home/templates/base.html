<!DOCTYPE html>

<html lang="en">
<html lang="{{ LANGUAGE_CODE|default:"en-us" }}" {% if LANGUAGE_BIDI %}dir="rtl"{% endif %}>

    <head>
        <meta charset="utf-8" />
        <meta property="og:description" content="Take the stress out of eating healthy." />
        <meta property="og:url" content="http://www.healthfully.me" />
        <meta property="og:title" content="Healthfully.me" />
        <meta property="og:type" content="website" />
        <meta property="og:image" content="http://www.healthfully.me{{ STATIC_URL }}img/hm-logo.jpg" />
        {% block extra_meta %}{% endblock %}
        
        <title>{% block title %}{% endblock %}</title>

        <meta name="HandheldFriendly" content="true" />
        <meta name="MobileOptimized" content="450">
        <meta name="viewport" content="width=device-width, maximum-scale=10.0, minimum-scale=0, user-scalable=yes"/>

        <!-- Javascript Libraries -->
        <!-- Google Hosted jQuery -->
        <script src="{{ STATIC_URL }}js/jquery-1.9.1.js"></script>

        <!-- boostrap.js -->
        <script src="{{ STATIC_URL }}bootstrap/js/bootstrap.min.js"></script>
        
        <!-- Segment.io -->
        <script type="text/javascript">
          var analytics=analytics||[];analytics.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var r=function(e){return function(){analytics.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["identify","track","trackLink","trackForm","trackClick","trackSubmit","pageview","ab","alias","ready"];for(var s=0;s<i.length;s++)analytics[i[s]]=r(i[s])};
          analytics.load("{{ SEGMENT_IO_KEY }}");
        </script>

        {% block extra_script_include %}
        {% endblock %}

        <!-- Styles -->
        <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet">
        <link href="{{ STATIC_URL }}bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
        
        <!-- Google Web Fonts -->
        <link href='https://fonts.googleapis.com/css?family=Montez' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Signika:300' rel='stylesheet' type='text/css'>

        {% block extra_style %}{% endblock %}
    </head>

    <body>
        {% block body %}{% endblock %}
    </body>
    
     <!-- Setup so jquery can make ajax POST calls to Django (Send the CSRF_TOKEN) -->
    <script type="application/javascript">
        $.ajaxSetup({ 
             beforeSend: function(xhr, settings) {
                 function getCookie(name) {
                     var cookieValue = null;
                     if (document.cookie && document.cookie != '') {
                         var cookies = document.cookie.split(';');
                         for (var i = 0; i < cookies.length; i++) {
                             var cookie = jQuery.trim(cookies[i]);
                             // Does this cookie string begin with the name we want?
                             if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                 cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                 break;
                            }
                        }
                    }
                    return cookieValue;
                 }
                 
                 if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                     // Only send the token to relative URLs i.e. locally.
                     xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                 }
                 
                 console.log("Set up CSRF_TOKEN for ajax POST")
             } 
        });
    </script>

</html>